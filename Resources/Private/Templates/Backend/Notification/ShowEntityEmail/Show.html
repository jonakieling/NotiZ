{namespace nz=CuyZ\Notiz\ViewHelpers}
{namespace b = TYPO3\CMS\Backend\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="HeaderButtons">
    <f:render partial="Backend/Index/HeaderButtons" section="Buttons" arguments="{_all}" />
</f:section>

<f:section name="Content">
    <div class="container">
        <f:render partial="Backend/Notification/Show/Header"
                  section="Content"
                  arguments="{notification: notification}" />

        <table class="table">
            <f:render partial="Backend/Notification/Show/GeneralInformation"
                      section="Content"
                      arguments="{notification: notification}" />

            <f:render section="MailInformation" arguments="{_all}" />

            <f:render section="Preview" arguments="{_all}" />
        </table>
    </div>
</f:section>

--------------------------------------------------------------------------------
General information about the mail notification.
--------------------------------------------------------------------------------
<f:section name="MailInformation">
    <thead>
        <tr>
            <th colspan="2">Information about the mail</th>
        </tr>
    </thead>

    <tr>
        <td>Recipients</td>
        <td>
            <dl>
                <dt>To</dt>
                <dd>{notification.sendTo}</dd>

                <dt>Cc</dt>
                <dd>{notification.sendCc}</dd>

                <dt>Bcc</dt>
                <dd>{notification.sendBcc}</dd>
            </dl>
        </td>
    </tr>

    <tr>
        <td>Provided recipients</td>
        <td>
            <dl>
                <dt>To</dt>
                <dd>
                    <f:render section="ProvidedRecipients" arguments="{recipients: notification.selectedSendToProvided}" />
                </dd>

                <dt>Cc</dt>
                <dd>
                    <f:render section="ProvidedRecipients" arguments="{recipients: notification.selectedSendCcProvided}" />
                </dd>

                <dt>Bcc</dt>
                <dd>
                    <f:render section="ProvidedRecipients" arguments="{recipients: notification.selectedSendBccProvided}" />
                </dd>
            </dl>
        </td>
    </tr>
</f:section>

--------------------------------------------------------------------------------
Preview of the whole mail body.
--------------------------------------------------------------------------------
<f:section name="Preview">
    <thead>
        <tr>
            <th colspan="2">
                Preview
                <a href="{f:uri.action(action: 'preview', arguments: {notificationIdentifier: notification.uid})}"
                   title="{nz:t(key: 'Backend/Module/Index/Global:open_new_tab')}"
                   target="_blank">
                    <core:icon identifier="actions-window-open" />
                </a>
            </th>
        </tr>
    </thead>

    <tr>
        <td colspan="3">
            <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item"
                        src="{f:uri.action(action: 'preview', arguments: {notificationIdentifier: notification.uid})}"></iframe>
            </div>
        </td>
    </tr>
</f:section>

--------------------------------------------------------------------------------
@todo
--------------------------------------------------------------------------------
<f:section name="ProvidedRecipients">
    <f:if condition="{recipients}">
        <ul>
            <f:for each="{recipients}" as="recipient">
                <li>{recipient.label}</li>
            </f:for>
        </ul>
    </f:if>
</f:section>
