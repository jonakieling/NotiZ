{namespace nz=CuyZ\Notiz\ViewHelpers}
{namespace b = TYPO3\CMS\Backend\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="HeaderButtons">
    <f:render partial="Backend/Index/HeaderButtons" section="Buttons" arguments="{_all}" />
</f:section>

<f:section name="Content">
    <div class="container">
        <f:render partial="Backend/Notification/Show/Header" section="Content" arguments="{_all}" />

        <div class="panel panel-default">
            <div class="panel-heading">@todo</div>

            <table class="table">
                <tr>
                    <td>Event</td>
                    <td colspan="2">
                        <f:link.action action="showEvent"
                                       arguments="{eventIdentifier: notification.eventDefinition.fullIdentifier}"
                                       title="{nz:t(key: 'Backend/Module/Index/Global:show_event_details', args: {0: notification.eventDefinition.label})}">
                            {notification.eventDefinition.label} ({notification.eventDefinition.group.label})
                        </f:link.action>
                    </td>
                </tr>
                <tr>
                    <td>Created by</td>
                    <td colspan="2">
                        <b:avatar backendUser="{notification.backendUser.uid}" />
                        <f:if condition="{notification.backendUser.realName}">
                            <f:then>{notification.backendUser.realName}</f:then>
                            <f:else>{notification.backendUser.userName}</f:else>
                        </f:if>
                    </td>
                </tr>

                <tr>
                    <td rowspan="4">Recipients</td>
                </tr>
                <tr>
                    <td>To</td>
                    <td>{notification.sendTo}</td>
                </tr>
                <tr>
                    <td>Cc</td>
                    <td>{notification.sendCc}</td>
                </tr>
                <tr>
                    <td>Bcc</td>
                    <td>{notification.sendBcc}</td>
                </tr>

                <tr>
                    <td rowspan="4">Provided recipients</td>
                </tr>
                <tr>
                    <td>To</td>
                    <td>
                        <f:if condition="{notification.selectedSendToProvided}">
                            <ul>
                                <f:for each="{notification.selectedSendToProvided}" as="recipient">
                                    <li>{recipient.label}</li>
                                </f:for>
                            </ul>
                        </f:if>
                    </td>
                </tr>
                <tr>
                    <td>Cc</td>
                    <td>
                        <f:if condition="{notification.selectedSendCcProvided}">
                            <ul>
                                <f:for each="{notification.selectedSendCcProvided}" as="recipient">
                                    <li>{recipient.label}</li>
                                </f:for>
                            </ul>
                        </f:if>
                    </td>
                </tr>
                <tr>
                    <td>Bcc</td>
                    <td>
                        <f:if condition="{notification.selectedSendBccProvided}">
                            <ul>
                                <f:for each="{notification.selectedSendBccProvided}" as="recipient">
                                    <li>{recipient.label}</li>
                                </f:for>
                            </ul>
                        </f:if>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</f:section>
