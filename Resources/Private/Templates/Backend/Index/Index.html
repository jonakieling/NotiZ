{namespace nz=CuyZ\Notiz\ViewHelpers}
{namespace b = TYPO3\CMS\Backend\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="HeaderButtons">
    <f:render partial="Backend/Index/HeaderButtons" section="Buttons" arguments="{_all}" />
</f:section>

<f:section name="Content">
    <div class="container">
        <div class="page-header">
            <h1>Notifications</h1>
        </div>

        <div class="row">
            <f:if condition="{definition.notifications}">
                <f:for each="{definition.notifications}" as="notification">
                    <div class="col-md-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h2 class="panel-title text-center">
                                    <core:icon identifier="{notification.iconIdentifier}" size="default" />
                                    {notification.label}
                                </h2>
                            </div>
                            <div class="panel-body">
                                <p>Bacon ipsum dolor amet prosciutto pork loin jowl ribeye, burgdoggen swine filet mignon. Pork belly shank ham hock corned beef frankfurter.</p>

                                <p>Prosciutto boudin pork chop filet mignon, sausage pork belly kielbasa meatball capicola short ribs rump chuck shoulder. Pork belly prosciutto kielbasa landjaeger hamburger tongue drumstick.</p>
                            </div>
                            <div class="panel-footer text-center">
                                <f:link.action action="test" class="btn btn-default">
                                    <core:icon identifier="actions-system-list-open" />
                                    Show {notification.processor.totalNumber} notifications
                                </f:link.action>
                            </div>
                        </div>
                    </div>
                </f:for>
            </f:if>
        </div>

        <div class="page-header">
            <h1>Test</h1>
        </div>

        <div class="row">
            <div class="col-md-12">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th width="32"></th>
                        <th width="32">#</th>
                        <th>Title</th>
                        <th>Event</th>
                        <th class="text-right">Action</th>
                    </tr>
                    </thead>
                    <f:for each="{definition.notifications.entityEmail.processor.allNotifications}" as="email">
                        <tr>
                            <td>
                                <b:avatar backendUser="{user.uid}" />
                            </td>
                            <td>
                                <strong>{email.uid}</strong>
                            </td>
                            <td>{email.title}</td>
                            <td>{email.eventDefinition.label} ({email.eventGroupDefinition.label})</td>
                            <td align="right">
                                <div class="btn-group" role="group">
                                    <f:link.action action="test" class="btn btn-default">
                                        <core:icon identifier="actions-open" />
                                    </f:link.action>
                                    <f:link.action action="test" class="btn btn-default">
                                        <core:icon identifier="actions-view" />
                                    </f:link.action>
                                </div>
                            </td>
                        </tr>
                    </f:for>
                </table>
            </div>
        </div>


        <div class="page-header">
            <h1>
                <f:variable name="emailDefinition" value="{definition.notifications.entityEmail}" />
                <core:icon identifier="{emailDefinition.iconIdentifier}" size="default" />
                {myEmail.title}
                <small title="LLL:uid">({myEmail.uid})</small>
            </h1>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Panel heading</div>

            <table class="table">
                <tr>
                    <td>Event</td>
                    <td>{myEmail.eventDefinition.label} ({myEmail.eventGroupDefinition.label})</td>
                </tr>
                <tr>
                    <td>Recipients (To)</td>
                    <td>{myEmail.sendTo}</td>
                </tr>
                <tr>
                    <td>Recipients (To)</td>
                    <td>{myEmail.sendToProvided}</td>
                </tr>
            </table>

            <ul class="list-group">
                <li class="list-group-item">Dapibus ac facilisis in</li>
                <li class="list-group-item">Morbi leo risus</li>
                <li class="list-group-item">Porta ac consectetur ac</li>
                <li class="list-group-item">Vestibulum at eros</li>
            </ul>
        </div>
    </div>
</f:section>
