{namespace nz=CuyZ\Notiz\ViewHelpers}
{namespace b = TYPO3\CMS\Backend\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="HeaderButtons">
    <f:render partial="Backend/Index/HeaderButtons" section="Buttons" arguments="{_all}" />
</f:section>

<f:section name="Content">
    <f:render partial="Backend/Index/CreateNotificationModal"
              section="Content"
              arguments="{definition: definition, event: eventDefinition.fullIdentifier}" />

    <div class="container">
        <div class="page-header">
            <h1>
                <nz:t key="Backend/Module/Index/ShowEvent:show_event.title" args="{0: eventDefinition.label}" />
            </h1>
        </div>

        <p>
            <f:link.action action="listEvents"
                           controller="Backend\Index"
                           class="btn btn-default">
                <core:icon identifier="actions-view-go-back" />
                <nz:t key="Backend/Module/Index/Global:go_back_list_view" />
            </f:link.action>

            <a href="#"
               class="btn btn-default"
               data-toggle="modal"
               data-target="#create-notification">

                <core:icon identifier="actions-add" />
                <nz:t key="Backend/Module/Index/Global:create_notification" />
            </a>
        </p>

        <f:if condition="{eventDefinition.description}">
            <blockquote>
                <nz:format.nl2brTrim>{eventDefinition.description}</nz:format.nl2brTrim>
            </blockquote>
        </f:if>

        <h2>
            <nz:t key="Backend/Module/Index/ShowEvent:notifications_bound_to_event" />
        </h2>

        <ul class="list-unstyled">
            <f:for each="{notifications}" as="notification">
                <li>
                    <f:link.action action="listNotifications"
                                   title="{nz:t(key: 'Backend/Module/Index/ShowEvent:show_notifications_bound_to_event', args: '{0: notification.definition.label}')}"
                                   arguments="{notificationIdentifier: notification.definition.identifier, filterEvent: eventDefinition.identifier}">
                        <core:icon identifier="{notification.definition.iconIdentifier}" />

                        {notification.definition.label}

                        <f:if condition="{notification.count}">
                            ({notification.count})
                        </f:if>
                    </f:link.action>
                </li>
            </f:for>
        </ul>
    </div>
</f:section>
