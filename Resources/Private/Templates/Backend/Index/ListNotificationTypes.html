{namespace nz=CuyZ\Notiz\ViewHelpers}
{namespace b=TYPO3\CMS\Backend\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="HeaderButtons">
    <f:render partial="Backend/Index/HeaderButtons" section="Buttons" arguments="{_all}" />
</f:section>

--------------------------------------------------------------------------------
Main section of this view.

Lists all existing notification types: emails, logs, Slackâ€¦ For each entry, a
link is added to list all the notifications.
--------------------------------------------------------------------------------
<f:section name="Content">
    <div class="container">
        <div class="page-header">
            <h1>
                <nz:t key="Backend/Module/Index/ListNotificationTypes:module.title" />
            </h1>
        </div>

        <div class="row">
            <f:if condition="{definition.listableNotifications}">
                <f:then>
                    <f:be.infobox>
                        <nz:format.nl2brTrim>
                            <nz:t key="Backend/Module/Index/ListNotificationTypes:introduction" />
                        </nz:format.nl2brTrim>
                    </f:be.infobox>

                    <f:for each="{definition.listableNotifications}" as="notification">
                        <f:render section="Notification" arguments="{notification: notification}" />
                    </f:for>
                </f:then>
                <f:else>
                    <f:be.infobox state="-1">
                        <p>
                            <nz:format.nl2brTrim>
                                <nz:t key="Backend/Module/Index/ListNotificationTypes:no_notification_type_found" />
                            </nz:format.nl2brTrim>
                        </p>
                    </f:be.infobox>
                </f:else>
            </f:if>
        </div>
    </div>
</f:section>

--------------------------------------------------------------------------------
A block that shows information about a given notification type.
--------------------------------------------------------------------------------
<f:section name="Notification">
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h2 class="panel-title text-center">
                    <f:link.action action="listNotifications"
                                   title="{nz:t(key: 'Backend/Module/Index/ListNotificationTypes:show_notifications', args: {0: notification.processor.totalNumber})}"
                                   arguments="{notificationIdentifier: notification.identifier}">
                        <nz:core.icon identifier="{notification.iconIdentifier}" size="default" />
                        {notification.label}
                    </f:link.action>
                </h2>
            </div>

            <div class="panel-body">
                <f:if condition="{notification.description}">
                    <f:then>
                        <nz:format.nl2brTrim>{notification.description}</nz:format.nl2brTrim>
                    </f:then>
                    <f:else>
                        <em>
                            <nz:t key="Backend/Module/Index/ListNotificationTypes:notification.no_description" />
                        </em>
                    </f:else>
                </f:if>
            </div>

            <div class="panel-footer text-center">
                <nz:backend.notification.createLink notificationDefinition="{notification}"
                                                    class="btn btn-default"
                                                    title="{nz:t(key: 'Backend/Module/Index/Global:create_notification')}">
                    <nz:core.icon identifier="actions-add" />
                    <nz:t key="Backend/Module/Index/Global:create_notification" />
                </nz:backend.notification.createLink>

                <f:if condition="{notification.processor.totalNumber}">
                    <f:alias map="{label: '{nz:t(key: \'Backend/Module/Index/ListNotificationTypes:show_notifications\', args: {0: notification.processor.totalNumber})}'}">
                        <f:link.action action="listNotifications"
                                       class="btn btn-default"
                                       title="{label}"
                                       arguments="{notificationIdentifier: notification.identifier}">

                            <nz:core.icon identifier="actions-system-list-open" />
                            {label}
                        </f:link.action>
                    </f:alias>
                </f:if>
            </div>
        </div>
    </div>
</f:section>
